(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{516:function(s,e,a){"use strict";a.r(e);var t=a(0),r=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"重新签名应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重新签名应用"}},[s._v("#")]),s._v(" 重新签名应用")]),s._v(" "),e("p",[s._v("对于客户提供的已签名apk进行再次签名的方法如下：")]),s._v(" "),e("ol",[e("li",[s._v("使用apktool工具，将原apk的签名进行删除：命令如下：apktool d test.apk")]),s._v(" "),e("li",[s._v("对删除签名之后的文件夹进行再次打包，此时无签名，命令如下：apktool b test，此时在test目录下会有一个dist文件夹，dist下面的就是重新打包的apk；")]),s._v(" "),e("li",[s._v("使用jarsigner对步骤2当中重新打包的apk进行签名，android有自带签名的DOS命令 : jarsigner -verbose -keystore [您的"),e("a",{attrs:{href:"https://so.csdn.net/so/search?q=%E7%A7%81%E9%92%A5&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[s._v("私钥"),e("OutboundLink")],1),s._v("存放路径] -signedjar [签名后文件存放路径] [未签名的文件路径] [您的证书名称]")])]),s._v(" "),e("p",[s._v("示例命令如下：jarsigner -verbose -keystore platform-rtk.jks -signedjar out.apk app-debug.apk androiddebugkey")]),s._v(" "),e("h2",{attrs:{id:"jarsigner命令说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jarsigner命令说明"}},[s._v("#")]),s._v(" jarsigner命令说明")]),s._v(" "),e("blockquote",[e("p",[s._v("-keystore后面为keystore")]),s._v(" "),e("p",[s._v("-sigfile 指定.SF和.RSA文件的文件名，如果不输入-sigfile，则默认使用keystore别名的前8个字符作为文件名")]),s._v(" "),e("p",[s._v("-storepass 指定keystore的密码")]),s._v(" "),e("p",[s._v("-sigalg 指定摘要算法")]),s._v(" "),e("p",[s._v("-digestalg 指定签名算法，如果指定SHA1则使用SHA1签名，如果不指定，则使用SHA256")]),s._v(" "),e("p",[s._v("androiddebugkey 为keystore的别名")])]),s._v(" "),e("p",[s._v("示例：")]),s._v(" "),e("p",[s._v("jarsigner -verbose -keystore debug.keystore -storepass android -signedjar test_signed.apk -digestalg SHA1 -sigalg MD5withRSA test.apk androiddebugkey")]),s._v(" "),e("h2",{attrs:{id:"apksigner-命令说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apksigner-命令说明"}},[s._v("#")]),s._v(" apksigner 命令说明")]),s._v(" "),e("p",[s._v("java -jar apksigner.jar sign --ks debug.keystore --ks-key-alias androiddebugkey --ks-pass pass:android --key-pass pass:android --out test-new_sign.apk test-new.apk")]),s._v(" "),e("blockquote",[e("p",[s._v("–ks 后面为keystore")]),s._v(" "),e("p",[s._v("–ks-key-alias 后面为keystore别名")]),s._v(" "),e("p",[s._v("–ks-pass pass: 后面为keystore的密码")]),s._v(" "),e("p",[s._v("–key-pass pass: 后面为keystore的密码")]),s._v(" "),e("p",[s._v("–v1-signing-enabled 是否开启V1签名,默认开启")]),s._v(" "),e("p",[s._v("–v2-signing-enabled 是否开启V2签名,默认开启（apksigner sign --v2-signing-enabled false --ks 密钥库名 xxx.apk）"),e("br"),s._v("\n–out 为输出的apk")])]),s._v(" "),e("p",[s._v("apksigner.jar所在目录：E:\\studio_sdk\\build-tools\\28.0.3\\lib")]),s._v(" "),e("p",[s._v("使用示例：")]),s._v(" "),e("p",[s._v("java -jar E:\\studio_sdk\\build-tools\\28.0.3\\lib\\apksigner.jar sign --ks application.keystore --ks-key-alias androiddebugkey --ks-pass pass:android --key-pass pass:android --out cashier_system_tablet-release_signed.apk cashier_system_tablet-release_unsign.apk")]),s._v(" "),e("p",[s._v("本文转自 "),e("a",{attrs:{href:"https://blog.csdn.net/u010755471/article/details/127582206",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.csdn.net/u010755471/article/details/127582206"),e("OutboundLink")],1),s._v("，如有侵权，请联系删除。")])])}),[],!1,null,null,null);e.default=r.exports}}]);